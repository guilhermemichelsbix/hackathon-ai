@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light Mode - Elegant Whites and Grays */
    --background: 0 0% 100%; /* Pure white */
    --foreground: 0 0% 9%; /* Rich black */
    
    --card: 0 0% 100%; /* Pure white */
    --card-foreground: 0 0% 9%; /* Rich black */
    
    --popover: 0 0% 100%; /* Pure white */
    --popover-foreground: 0 0% 9%; /* Rich black */
    
    --primary: 0 0% 9%; /* Rich black */
    --primary-foreground: 0 0% 98%; /* Off white */
    
    --secondary: 0 0% 96%; /* Light gray */
    --secondary-foreground: 0 0% 9%; /* Rich black */
    
    --muted: 0 0% 96%; /* Light gray */
    --muted-foreground: 0 0% 45%; /* Medium gray */
    
    --accent: 0 0% 96%; /* Light gray */
    --accent-foreground: 0 0% 9%; /* Rich black */
    
    --destructive: 0 84% 60%; /* Red for alerts only */
    --destructive-foreground: 0 0% 98%; /* Off white */
    
    --border: 0 0% 89%; /* Light border */
    --input: 0 0% 89%; /* Light input border */
    --ring: 0 0% 9%; /* Rich black ring */
    
    --radius: 0.75rem; /* Elegant rounded corners */
  }

  .dark {
    /* Dark Mode - Sophisticated Blacks and Grays */
    --background: 0 0% 4%; /* Deep black */
    --foreground: 0 0% 98%; /* Off white */
    
    --card: 0 0% 6%; /* Slightly lighter black */
    --card-foreground: 0 0% 98%; /* Off white */
    
    --popover: 0 0% 6%; /* Slightly lighter black */
    --popover-foreground: 0 0% 98%; /* Off white */
    
    --primary: 0 0% 98%; /* Off white */
    --primary-foreground: 0 0% 9%; /* Rich black */
    
    --secondary: 0 0% 14%; /* Dark gray */
    --secondary-foreground: 0 0% 98%; /* Off white */
    
    --muted: 0 0% 14%; /* Dark gray */
    --muted-foreground: 0 0% 64%; /* Medium gray */
    
    --accent: 0 0% 14%; /* Dark gray */
    --accent-foreground: 0 0% 98%; /* Off white */
    
    --destructive: 0 84% 60%; /* Red for alerts only */
    --destructive-foreground: 0 0% 98%; /* Off white */
    
    --border: 0 0% 14%; /* Dark border */
    --input: 0 0% 14%; /* Dark input border */
    --ring: 0 0% 98%; /* Off white ring */
    
    --radius: 0.75rem; /* Elegant rounded corners */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground;
    font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    font-feature-settings: "rlig" 1, "calt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-synthesis: none;
    font-optical-sizing: auto;
    line-height: 1.6;
  }
  
  /* Force correct theme application */
  html, body, #root {
    background-color: hsl(var(--background)) !important;
    color: hsl(var(--foreground)) !important;
    transition: background-color 0.3s ease, color 0.3s ease !important;
  }
  
  html.dark, body.dark, #root.dark {
    background-color: hsl(var(--background)) !important;
    color: hsl(var(--foreground)) !important;
    transition: background-color 0.3s ease, color 0.3s ease !important;
  }
  
  html.light, body.light, #root.light {
    background-color: hsl(var(--background)) !important;
    color: hsl(var(--foreground)) !important;
    transition: background-color 0.3s ease, color 0.3s ease !important;
  }
  
  /* Elegant typography hierarchy */
  h1, h2, h3, h4, h5, h6 {
    font-family: inherit;
    font-weight: 600;
    line-height: 1.2;
    letter-spacing: -0.025em;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
  
  h1 {
    @apply text-4xl font-bold tracking-tight;
  }
  
  h2 {
    @apply text-3xl font-semibold tracking-tight;
  }
  
  h3 {
    @apply text-2xl font-semibold tracking-tight;
  }
  
  h4 {
    @apply text-xl font-semibold tracking-tight;
  }
  
  /* Elegant form elements */
  input, textarea, select {
    @apply transition-all duration-200 ease-in-out;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-synthesis: none;
  }
  
  input:focus, textarea:focus, select:focus {
    @apply ring-2 ring-primary/20 ring-offset-2 ring-offset-background;
  }
  
  /* Elegant buttons */
  button {
    @apply transition-all duration-200 ease-in-out;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
  
  /* Elegant cards */
  .card-elegant {
    @apply bg-card text-card-foreground border border-border/50 shadow-sm hover:shadow-md transition-all duration-300 ease-out;
  }
  
  /* Elegant spacing utilities */
  .space-elegant > * + * {
    @apply mt-6;
  }
  
  .space-elegant-sm > * + * {
    @apply mt-4;
  }
  
  .space-elegant-xs > * + * {
    @apply mt-2;
  }
  
  /* Custom elegant scrollbars */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--border)) transparent;
  }
  
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 4px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 4px;
    border: 2px solid transparent;
    background-clip: content-box;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--border) / 0.8);
    background-clip: content-box;
  }
  
  .custom-scrollbar::-webkit-scrollbar-corner {
    background: transparent;
  }
  
  /* Hide scrollbar but keep functionality */
  .scrollbar-hidden {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hidden::-webkit-scrollbar {
    display: none;
  }
  
         /* Elegant scroll indicators */
         .scroll-indicator {
           position: relative;
         }
         
         .scroll-indicator::before {
           content: '';
           position: absolute;
           top: 0;
           right: 0;
           width: 20px;
           height: 100%;
           background: linear-gradient(to left, hsl(var(--background)), transparent);
           opacity: 0;
           transition: opacity 0.3s ease;
           pointer-events: none;
           z-index: 10;
         }
         
         .scroll-indicator.can-scroll-right::before {
           opacity: 1;
         }
         
         /* Prevent ugly scrollbars during drag and drop */
         [data-dnd-context] {
           overflow: hidden !important;
         }
         
         .kanban-column-container {
           position: relative;
           overflow: hidden;
         }
         
         .kanban-column-container .cards-scroll-area {
           overflow-y: auto;
           overflow-x: hidden;
           scrollbar-width: thin;
           scrollbar-color: hsl(var(--border)) transparent;
           max-height: 100%;
           height: 100%;
         }
         
         .kanban-column-container .cards-scroll-area::-webkit-scrollbar {
           width: 6px;
         }
         
         .kanban-column-container .cards-scroll-area::-webkit-scrollbar-track {
           background: transparent;
         }
         
         .kanban-column-container .cards-scroll-area::-webkit-scrollbar-thumb {
           background: hsl(var(--border));
           border-radius: 3px;
         }
         
         .kanban-column-container .cards-scroll-area::-webkit-scrollbar-thumb:hover {
           background: hsl(var(--border) / 0.8);
         }
         
         /* During drag operations, prevent overflow scrollbars */
         .dnd-context-active {
           overflow: hidden !important;
         }
         
         /* Only apply overflow visible to specific drag-related elements */
         .dnd-context-active .kanban-card-wrapper {
           overflow: visible !important;
         }
         
         .dnd-context-active .sortable-ghost {
           overflow: visible !important;
         }
         
         /* Smooth drag animations without causing scrollbars */
         .sortable-ghost {
           opacity: 0.8;
           transform: rotate(2deg) scale(1.02);
           transition: all 0.2s ease-out;
           box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
         }
         
         .sortable-chosen {
           cursor: grabbing !important;
           transform: scale(1.05);
           transition: all 0.2s ease-out;
           box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
           z-index: 1000;
         }
         
         /* Smooth drop animations */
         .kanban-card-wrapper {
           transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
         }
         
         .kanban-card-wrapper:hover {
           transform: translateY(-2px);
           box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
         }
         
         /* Prevent horizontal scrollbar in cards container */
         .cards-container {
           width: 100%;
           overflow-x: hidden;
           overflow-y: visible;
         }
         
         /* Kanban card wrapper styles */
         .kanban-card-wrapper {
           position: relative;
           contain: layout;
         }
         
         .kanban-card-wrapper.sortable-chosen {
           z-index: 1000;
           transform-origin: center;
         }
         
         /* Prevent layout shift during drag */
         .kanban-card-wrapper:not(.sortable-chosen) {
           transition: transform 0.2s ease;
         }
         
         /* Ensure specific drag elements don't cause overflow during animations */
         .kanban-card-wrapper.sortable-chosen {
           overflow: visible;
         }
         
         /* Additional drag-specific optimizations */
         .dnd-context-active .cards-scroll-area {
           overflow: hidden !important;
         }
         
         .dnd-context-active .kanban-card-wrapper {
           will-change: transform;
         }
         
         /* Ensure line-clamp works properly during drag operations */
         .dnd-context-active .kanban-card-wrapper:not(.sortable-chosen) {
           overflow: hidden;
         }
         
         .dnd-context-active .kanban-card-wrapper:not(.sortable-chosen) p,
         .dnd-context-active .kanban-card-wrapper:not(.sortable-chosen) h3 {
           display: -webkit-box;
           -webkit-line-clamp: inherit;
           -webkit-box-orient: vertical;
           overflow: hidden;
         }
         
         /* Specific line-clamp preservation */
         .dnd-context-active .line-clamp-2 {
           -webkit-line-clamp: 2 !important;
         }
         
         .dnd-context-active .line-clamp-3 {
           -webkit-line-clamp: 3 !important;
         }
         
         /* Card content preservation during drag */
         .card-title {
           display: -webkit-box;
           -webkit-line-clamp: 2;
           -webkit-box-orient: vertical;
           overflow: hidden;
           word-wrap: break-word;
         }
         
         .card-description {
           display: -webkit-box;
           -webkit-line-clamp: 3;
           -webkit-box-orient: vertical;
           overflow: hidden;
           word-wrap: break-word;
         }
         
         /* Force preservation during drag operations */
         .dnd-context-active .card-title {
           -webkit-line-clamp: 2 !important;
           overflow: hidden !important;
         }
         
         .dnd-context-active .card-description {
           -webkit-line-clamp: 3 !important;
           overflow: hidden !important;
         }
         
         /* Elegant Kanban columns */
         .kanban-column {
           backdrop-filter: blur(12px);
           -webkit-backdrop-filter: blur(12px);
         }
         
         /* Enhanced scrollbar for columns */
         .kanban-column .custom-scrollbar::-webkit-scrollbar {
           width: 6px;
         }
         
         .kanban-column .custom-scrollbar::-webkit-scrollbar-track {
           background: transparent;
           border-radius: 3px;
         }
         
         .kanban-column .custom-scrollbar::-webkit-scrollbar-thumb {
           background: hsl(var(--border) / 0.5);
           border-radius: 3px;
           border: 1px solid transparent;
           background-clip: content-box;
         }
         
         .kanban-column .custom-scrollbar::-webkit-scrollbar-thumb:hover {
           background: hsl(var(--border) / 0.8);
           background-clip: content-box;
         }
         
         /* Prevent strange animations in sheet comments */
         .sheet-comments-container {
           contain: layout style;
         }
         
         .sheet-comments-container * {
           transform: translateZ(0);
           backface-visibility: hidden;
           -webkit-backface-visibility: hidden;
         }
}
